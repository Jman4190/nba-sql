(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{3286:function(t,e,n){},3349:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),o=n(0),i=n.n(o),s=function(t,e){let n,a;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=a=e):(n>e&&(n=e),a<e&&(a=e)));else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(void 0===n?o>=o&&(n=a=o):(n>o&&(n=o),a<o&&(a=o)))}return[n,a]},l=Math.sqrt(50),c=Math.sqrt(10),u=Math.sqrt(2);function h(t,e,n){var a=(e-t)/Math.max(0,n),r=Math.floor(Math.log(a)/Math.LN10),o=a/Math.pow(10,r);return r>=0?(o>=l?10:o>=c?5:o>=u?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=l?10:o>=c?5:o>=u?2:1)}var f=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var m,d,g=(1===(m=f).length&&(d=m,m=function(t,e){return f(d(t),e)}),{left:function(t,e,n,a){for(null==n&&(n=0),null==a&&(a=t.length);n<a;){var r=n+a>>>1;m(t[r],e)<0?n=r+1:a=r}return n},right:function(t,e,n,a){for(null==n&&(n=0),null==a&&(a=t.length);n<a;){var r=n+a>>>1;m(t[r],e)>0?a=r:n=r+1}return n}}),p=g.right,M=n(124),v=function(t){return+t},y=[0,1];function b(t){return t}function w(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function N(t,e,n){var a=t[0],r=t[1],o=e[0],i=e[1];return r<a?(a=w(r,a),o=n(i,o)):(a=w(a,r),o=n(o,i)),function(t){return o(a(t))}}function O(t,e,n){var a=Math.min(t.length,e.length)-1,r=new Array(a),o=new Array(a),i=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<a;)r[i]=w(t[i],t[i+1]),o[i]=n(e[i],e[i+1]);return function(e){var n=p(t,e,1,a)-1;return o[n](r[n](e))}}function k(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function x(){var t,e,n,a,r,o,i=y,s=y,l=M.a,c=b;function u(){var t,e,n,l=Math.min(i.length,s.length);return c!==b&&(t=i[0],e=i[l-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),a=l>2?O:N,r=o=null,h}function h(e){return isNaN(e=+e)?n:(r||(r=a(i.map(t),s,l)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=a(s,i.map(t),M.c)))(n)))},h.domain=function(t){return arguments.length?(i=Array.from(t,v),u()):i.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=M.d,u()},h.clamp=function(t){return arguments.length?(c=!!t||b,u()):c!==b},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,a){return t=n,e=a,u()}}function S(){return x()(b,b)}function j(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var A=n(38),X=function(t,e,n,a){var r,o=function(t,e,n){var a=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),o=a/r;return o>=l?r*=10:o>=c?r*=5:o>=u&&(r*=2),e<t?-r:r}(t,e,n);switch((a=Object(A.d)(null==a?",f":a)).type){case"s":var i=Math.max(Math.abs(t),Math.abs(e));return null!=a.precision||isNaN(r=Object(A.f)(o,i))||(a.precision=r),Object(A.c)(a,i);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(r=Object(A.g)(o,Math.max(Math.abs(t),Math.abs(e))))||(a.precision=r-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(r=Object(A.e)(o))||(a.precision=r-2*("%"===a.type))}return Object(A.a)(a)};function C(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var a,r,o,i,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((a=e<t)&&(r=t,t=e,e=r),0===(i=h(t,e,n))||!isFinite(i))return[];if(i>0)for(t=Math.ceil(t/i),e=Math.floor(e/i),o=new Array(r=Math.ceil(e-t+1));++s<r;)o[s]=(t+s)*i;else for(t=Math.floor(t*i),e=Math.ceil(e*i),o=new Array(r=Math.ceil(t-e+1));++s<r;)o[s]=(t-s)/i;return a&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var a=e();return X(a[0],a[a.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var a,r=e(),o=0,i=r.length-1,s=r[o],l=r[i];return l<s&&(a=s,s=l,l=a,a=o,o=i,i=a),(a=h(s,l,n))>0?a=h(s=Math.floor(s/a)*a,l=Math.ceil(l/a)*a,n):a<0&&(a=h(s=Math.ceil(s*a)/a,l=Math.floor(l*a)/a,n)),a>0?(r[o]=Math.floor(s/a)*a,r[i]=Math.ceil(l/a)*a,e(r)):a<0&&(r[o]=Math.ceil(s*a)/a,r[i]=Math.floor(l*a)/a,e(r)),t},t}function D(){return(D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}const E=["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027"],R={className:i.a.string,width:i.a.number,height:i.a.number,data:i.a.arrayOf(i.a.shape({y:i.a.number})).isRequired,bands:i.a.number,colors:i.a.arrayOf(i.a.string),colorScale:i.a.string,mode:i.a.string,offsetX:i.a.number,title:i.a.string,yDomain:i.a.arrayOf(i.a.number)},q={className:"",width:800,height:20,bands:E.length>>1,colors:E,colorScale:"series",mode:"offset",offsetX:0,title:"",yDomain:void 0};class P extends r.a.PureComponent{componentDidMount(){this.drawChart()}componentDidUpdate(){this.drawChart()}componentWillUnmount(){this.canvas=null}drawChart(){if(this.canvas){const{data:t,yDomain:e,width:n,height:a,bands:r,colors:o,colorScale:i,offsetX:l,mode:c}=this.props,u="change"===i?t.map(e=>D({},e,{y:e.y-t[0].y})):t,h=this.canvas.getContext("2d");h.imageSmoothingEnabled=!1,h.clearRect(0,0,n,a),h.setTransform(1,0,0,1,0,0),h.translate(.5,.5);const f=n/u.length,m=Math.floor(Math.max(0,-l/f)),d=Math.floor(Math.min(u.length,m+n/f));if(m>u.length)return;const[g,p]=e||s(u,t=>t.y),M=function t(){var e=S();return e.copy=function(){return k(e,t())},j.apply(e,arguments),C(e)}().domain([0,Math.max(-g,p)]).range([0,a]);let v,y,b=!1;for(let t=0;t<r;t+=1){h.fillStyle=o[r+t],y=(t+1-r)*a,M.range([r*a+y,y]);for(let t=m;t<d;t++)v=u[t].y,v<=0?b=!0:void 0!==v&&h.fillRect(l+t*f,M(v),f+1,M(0)-M(v))}if(b){"offset"===c&&(h.translate(0,a),h.scale(1,-1));for(let t=0;t<r;t++){h.fillStyle=o[r-t-1],y=(t+1-r)*a,M.range([r*a+y,y]);for(let t=m;t<d;t++)v=u[t].y,v>=0||h.fillRect(l+t*f,M(-v),f+1,M(0)-M(-v))}}}}render(){const{className:t,title:e,width:n,height:a}=this.props;return r.a.createElement("div",{className:"horizon-row "+t},r.a.createElement("span",{className:"title"},e),r.a.createElement("canvas",{ref:t=>{this.canvas=t},width:n,height:a}))}}P.propTypes=R,P.defaultProps=q;var H=P;n(3286);const T={className:i.a.string,width:i.a.number,height:i.a.number,seriesHeight:i.a.number,data:i.a.arrayOf(i.a.shape({key:i.a.arrayOf(i.a.string),values:i.a.arrayOf(i.a.shape({y:i.a.number}))})).isRequired,bands:i.a.number,colors:i.a.arrayOf(i.a.string),colorScale:i.a.string,mode:i.a.string,offsetX:i.a.number},z={className:"",width:800,height:600,seriesHeight:20,bands:Math.floor(E.length/2),colors:E,colorScale:"series",mode:"offset",offsetX:0};class F extends r.a.PureComponent{render(){const{className:t,width:e,height:n,data:a,seriesHeight:o,bands:i,colors:l,colorScale:c,mode:u,offsetX:h}=this.props;let f;if("overall"===c){const t=a.reduce((t,e)=>t.concat(e.values),[]);f=s(t,t=>t.y)}return r.a.createElement("div",{className:"superset-legacy-chart-horizon "+t,style:{height:n}},a.map(t=>r.a.createElement(H,{key:t.key,width:e,height:o,title:t.key.join(", "),data:t.values,bands:i,colors:l,colorScale:c,mode:u,offsetX:h,yDomain:f})))}}F.propTypes=T,F.defaultProps=z;e.default=F}}]);